<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Movie Info API</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
    </head>
    <style>
        div {margin-left: 25px;}
        ul {font-weight: bold; font-size: 20px; list-style: inside;}
        li {font-size: 12px;}
    </style>
    <body>
        <h1>OMDb API Search</h1>
        <div>
            <label for = searchBox>Enter Title and Press the Enter Key:</label>
            <input type="text" id="searchBox" name="searchBox">
        </div>
        <ul>Info Returned From Consumer Requests:</ul>
        <script>
                lpTag.agentSDK.init({});

                var updateCallback = function(data) {
                    console.log("Data");
                    console.log(data);

                    console.log("Data New Value");
                    console.log(data.newValue);

                    var newData = data.newValue;

                    var newArray = newData[0];
                    var atArray = newData.at(0);
                    var diffArray = newArray.toString();
                    var sepArray = JSON.parse(newArray);
                    var diffTestArray = atArray.toString();
                    var sepTestArray = JSON.parse(atArray);
                    var stringSepArray = sepArray.toString();
                    var stringSepTestArray = sepTestArray.toString();
                    var textSepArray = sepArray.text;
                    var textSepTestArray = sepTestArray.text;
                    var stringSepTextArray = textSepArray.toString();
                    var stringTextSepTestArray = textSepTestArray.toString();
                    var newIndexArray = newArray[0];
                    var indexAtArray = atArray[0];
                    var indexSepArray = sepArray[0];
                    var indexSepTestArray = setTestArray[0];                    

                    console.log("New Array")
                    console.log(newArray)

                    console.log("At Arrat")
                    console.log(atArray)

                    console.log("Diff Array")
                    console.log(diffArray)

                    console.log("Sep Array")
                    console.log(sepArray)

                    console.log("Diff Test Array")
                    console.log(diffTestArray)

                    console.log("Sep Test Array")
                    console.log(sepTestArray)

                    console.log("String Sep Array")
                    console.log(stringSepArray)

                    console.log("String Sep Test Array")
                    console.log(stringSepTestArray)

                    console.log("Text Sep Array")
                    console.log(textSepArray)

                    console.log("Text Sep Test Array")
                    console.log(textSepTestArray)

                    console.log("String Sep Text Array")
                    console.log(stringSepTextArray)

                    console.log("String Text Sep Test Array")
                    console.log(stringTextSepTestArray)

                    console.log("New Index Array")
                    console.log(newIndexArray)

                    console.log("Index At Array")
                    console.log(indexAtArray)

                    console.log("Index Sep Array")
                    console.log(indexSepArray)

                    console.log("Index Sep Test Array")
                    console.log(indexSepTestArray)

                    // for (var i = 0; i < data.NewValue.length; i++) {
                        
                    //     var text = data.newValue[i];

                    //     console.log("Text");
                    //     console.log(text);
                    // };

                    // console.log("Manual Attempt");
                    // console.log(data.newValue[0])
                };

                var pathToData = "chatTranscript.lines";

                lpTag.agentSDK.bind(pathToData, updateCallback);

            // var infoList = document.querySelector('ul');
            // var url = 'https://www.omdbapi.com/?t=';
            // var apiKey = '&apikey=4623f44d';
            // var title

            // var titleBox = document.getElementById('searchBox');

            // titleBox.addEventListener("keypress", function(event) {
            //     if (event.key === "Enter") {
            //         title = titleBox.value;

            //         cleanTitle = title.trim();
            //         formatTitle = cleanTitle.split(' ').join('+');

            //         requestUrl = url + formatTitle + apiKey;

            //         fetch(requestUrl)
            //             .then(res => res.json())
            //             .then((data) => {
            //                 if (!("Error" in data)) {
            //                 var listItem = document.createElement('li');

            //                 listItem.append(data.Title + ' is a ' + data.Type + ' released in ' + data.Year + ' with an IMDb Rating of ' + data.imdbRating + '.');
            //                 infoList.appendChild(listItem);
            //                 }
            //             });
            //     }
            // });
        </script>
    </body>
</html>
